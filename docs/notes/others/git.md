# Git

## git 常用命令

### 1. 配置与初始化

| 命令                                              | 说明                                                                               |
| ------------------------------------------------- | ---------------------------------------------------------------------------------- |
| `git config --global user.name "你的名字"`        | 设置全局用户名                                                                     |
| `git config --global user.email "your@email.com"` | 设置全局邮箱                                                                       |
| `git init`                                        | 在当前目录**初始化新仓库**（生成 `.git` 文件夹）                                   |
| `git clone <仓库地址>`                            | **克隆远程仓库**到本地（如 `git clone https://github.com/HelloCris/CrisWiki.git`） |

> 💡 首次使用 Git 必须配置 `user.name` 和 `user.email`，否则无法提交。

### 2. 查看状态与日志

| 命令                | 说明                                             |
| ------------------- | ------------------------------------------------ |
| `git status`        | 查看**工作区状态**（哪些文件被修改/新增/未跟踪） |
| `git log`           | 查看**提交历史**（按时间倒序）                   |
| `git log --oneline` | 简洁版日志（一行一条）                           |

### 3. 添加、提交（核心流程）

```bash
# 1. 修改代码后，将文件加入暂存区（stage）
git add <文件名>        # 添加单个文件
git add .               # 添加当前目录所有变更（推荐）

# 2. 提交到本地仓库
git commit -m "描述本次修改"
```

> ✅ **黄金流程**：`git add .` → `git commit -m "xxx"` → `git push`

### 4. 同步远程仓库（协作关键）

| 命令               | 说明                                         |
| ------------------ | -------------------------------------------- |
| `git pull`         | **拉取最新代码** = `git fetch` + `git merge` |
| `git fetch origin` | **仅更新远程分支信息**（不合并到本地）       |
| `git push`         | **推送本地提交到远程仓库**                   |
| `git remote -v`    | 查看远程仓库地址（origin）                   |

> ⚠️ **重要**：
>
> - 提交前先 `git pull`，避免冲突
> - 推送失败？可能是远程有新提交 → 先 `pull` 再 `push`

### 5. 分支操作（多人协作必备）

| 命令                         | 说明                                       |
| ---------------------------- | ------------------------------------------ |
| `git branch`                 | 列出所有本地分支,`-a` 所有分支（包括远程） |
| `git checkout <分支名>`      | 切换到指定分支                             |
| `git checkout -b <新分支名>` | **创建并切换到新分支**（最常用！）         |
| `git merge <分支名>`         | 将指定分支**合并到当前分支**               |
| `git branch -d <分支名>`     | 删除已合并的分支                           |
| `git stash`                  | 临时“藏”起当前修改（切换分支前常用）       |
| `git stash pop`              | 恢复最近一次 `stash` 的内容                |

### 6. 撤销与回退

| 场景                               | 命令                             | 说明                                       |
| ---------------------------------- | -------------------------------- | ------------------------------------------ |
| **已 `commit`，想修改上一次提交**  | `git commit --amend -m "新描述"` | 修改最近一次提交（慎用！勿改已推送的提交） |
| **回退到上一次提交（本地未推送）** | `git reset --soft HEAD~1`        | ⚠️ 仅限本地未推送时使用                    |
| **撤销某次历史提交（已推送远程）** | `git revert <commit-hash>`       | 撤销某次历史提交，但不会删除原有提交记录   |
